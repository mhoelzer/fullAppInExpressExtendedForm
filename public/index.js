const userCreateForm = document.getElementById("user-create-form");
const userCreateSubmitButton = userCreateForm.querySelector("button[type='submit']");
userCreateForm.addEventListener("submit", submitInputs); //submit shoudl help for button or enter; forms have submit events 

function submitInputs(event) {
    event.preventDefault();
    let userInfo = {
        fullName: document.getElementById("fullName").value,
        username: document.getElementById("username").value,
        email: document.getElementById("email").value,
        birthday: document.getElementById("birthday").value,
        phone: document.getElementById("phone").value,
        website: document.getElementById("website").value,
        communication: document.querySelectorAll("input[name=communication]:checked").value, // just the singular will give first it finds, but all will give node list of all elements that match the search; helps with nodes inside the dom; nodelist is generated by dom and convert to array by doing Array.from(), which converts iterable to js array and can do things like a forEAch
            // Array.from(document.questSelectorAll("input[name=vehicle]:checked")).forEach(checkbox => console.log(checkbox.value))
        // devices: document.querySelectorAll("input[name=devices]:checked").value,
        // devices: checkBoxChecker(),
        // access: checkBoxChecker()
        // car: ChangeCarList()
    };
    
    let userInfoStringified = JSON.stringify(userInfo);
    const postMethod = {
        method: "POST",
        body: userInfoStringified,
        headers: {
            "Content-Type": "application/json; charset=utf-8",
        }
    };
    let url = "/api/user"
    console.log(userInfoStringified);
    
    // function checkBoxChecker() {
    //     let multi = document.getElementById("multi");
    //     let selectedDevices = multi.options[multi.selectedIndex].value;
    //     // console.log(selectedDevices)
    //     return selectedDevices
    //     // const ios = document.getElementById("iOS").checked
    //     // const android = document.getElementById("android").checked
    //     // const mac = document.getElementById("mac").checked
    //     // const windows = document.getElementById("windows").checked
    //     // const chrome = document.getElementById("chromebook").checked
    //     // const linux = document.getElementById("linux").checked
    //     // let preferredDevice = []
    //     // if (android === true) {
    //     //     preferredDevice.push("Android")
    //     // } if (ios === true) {
    //     //     preferredDevice.push("iOS")
    //     // } if (mac === true) {
    //     //     preferredDevice.push("Mac")
    //     // } if (windows === true) {
    //     //     preferredDevice.push("Windows")
    //     // } if (chrome === true) {
    //     //     preferredDevice.push("Chrome")
    //     // } if (linux === true) {
    //     //     preferredDevice.push("Linux")
    //     // } 
    //     // return preferredDevice
    // }
    // console.log(Array.from(devices).forEach(checkbox => console.log(checkbox.value)))
    fetch(url, postMethod)
        .then(response => {
            // response.json();
            if(response.status === 201) {
                alert("success!")
            } else if(response.status === 409) {
                alert("username exists")
                alert("you're a failure. don't ever come to this website again.")
            }
            // let div = document.createElement("div")
            // div.appendChild(response)
            // let put = document.getElementById("put")
            // put.appendChild(div)
            console.log("test: ", response)
            return response.json()  // parses body
        })
        .then(response => {
            console.log(response)
        });
};
// doc.getelid.
// thingoption[thing]

function changeBackground(obj) {
    document.getElementById("changeBodyBackground").style.backgroundColor = obj.value;
}
function ChangeCarList() {
    var carList = document.getElementById("car");
    var selCar = carList.options[carList.selectedIndex].value;
    console.log(selCar)
    console.log(Array.from(selCar))
   let selCar2 = Array.from(selCar)
    // Array.from(document.questSelectorAll("input[name=vehicle]:checked")).forEach(checkbox => console.log(checkbox.value))
    let put = document.getElementById("put")
            put.appendChild(selCar2)
}